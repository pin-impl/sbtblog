


@views.html.admin.admin("发布") {

    <div class="publish-ctl">
        <div class="publish-space"></div>
        <div class="btn-panel">
            <button class="btn-publish">发布</button>
        </div>
    </div>

    <div class="publish">
        <div class="blog-info">
        <input class="blog-title" id="title">
        <textarea class="editor" id="content"># Marked in browser
Render by **marked**.
        </textarea>
        </div>
        <div class="separator"></div>
        <div id="show-md" class="markdown-preview"></div>
    </div>

    <link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/admin.css")">
    <link href="//cdn.bootcss.com/highlight.js/9.15.6/styles/a11y-dark.min.css" rel="stylesheet">
    <script src="//cdn.bootcss.com/marked/0.6.2/marked.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.15.6/highlight.min.js"></script>
    <script type="application/javascript">
        var rendererMD = new marked.Renderer();
        marked.setOptions({
            highlight: function (code) {
                return hljs.highlightAuto(code).value;
            },
            renderer: rendererMD,
            gfm: true,
            tables: true,
            breaks: true,
            pedantic: false,
            sanitize: false,
            smartLists: true,
            smartypants: false
        });

        var markdown = document.getElementById("content");

        var showMD = document.getElementById("show-md");

        var title = document.getElementById('title');

        showMD.innerHTML = marked(markdown.value);

        markdown.addEventListener('keyup', refreshMD);

        function refreshMD(e) {
            console.log(markdown.value);
            showMD.innerHTML = marked(markdown.value);
        }

        var blog = {};
        function save() {
            var blogInfo = marked(markdown.value);
            var lineInfo = blogInfo.split('\n');
            blog.title = title.value;
            blog.summary = lineInfo[0] + lineInfo[1];
            blog.content = blogInfo;
        }
    </script>
}